<!doctype html>
<link rel="help" href="http://crbug.com/1325192">
<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script>
<script src="/common/utils.js"></script>
<script src="/common/dispatcher/dispatcher.js"></script>
<script src="/html/browsers/browsing-the-web/back-forward-cache/resources/helper.sub.js"></script>

<script>
// This test:
// * Attaches an <embed type='text/html'> to first page.
// * Changes <embed> type to plugin.
// * Navigates away, then back via bfcache.
runBfcacheTest({
  targetOrigin: originSameOrigin,
  shouldBeCached: true,
  funcBeforeNavigation: () => {
    const embed = document.createElement('embed');
    embed.type = 'text/html';
    embed.src = '/resources/blank.html';
    document.body.append(embed);
    embed.type = 'application/pdf';
    embed.src = '/loading/early-hints/resources/example.pdf';
  }
}, 'embed type in first page changes from html to pdf.');

// This test:
// * Attaches an <embed type='application/pdf'> to first page.
// * Changes <embed> type to iframe.
// * Navigates away, then back via bfcache.
runBfcacheTest({
  targetOrigin: originSameOrigin,
  shouldBeCached: true,
  funcBeforeNavigation: () => {
    const embed = document.createElement('embed');
    embed.type = 'application/pdf';
    embed.src = '/loading/early-hints/resources/example.pdf';
    document.body.append(embed);
    embed.type = 'text/html';
    embed.src = '/resources/blank.html';
  }
}, 'embed type in first page changes from pdf to html.');

</script>
